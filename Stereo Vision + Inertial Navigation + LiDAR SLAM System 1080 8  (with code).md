![avatar]( 20210113175452797.png) 

 Abstract: The SLAM system of stereo vision + inertial navigation + lidar proposed in this paper can achieve good performance in some complex scenarios such as tunnels. VIL-SLAM achieves this goal by combining a tightly coupled stereo vision inertial odometer (VIO) with lidar mapping and lidar-enhanced vision loop closure. The system generates a 6-degree-of-freedom lidar attitude with loop closure correction and a near-real-time 1cm voxel dense point cloud in real time. Compared with state-of-the-art lidar methods, VIL-SLAM shows higher precision and robustness. Main content, the system has four modules, as shown in Figure 2. The visual front end acquires stereo images from a stereo camera. It performs frame-to-frame tracking and stereo frame matching, and outputs stereo matching results as visual measurements. Stereo VIO uses stereo matching and IMU measurement, and performs IMU pre-integration and smooth tight coupling results on the pose map. The module outputs the VIO pose according to the IMU and the camera. The LiDAR mapping module uses the motion estimation of the VIO and performs LiDAR point denoising and scanning for map registration. The loop closure module performs visual loop detection and initial loop constraint estimation, and further fine registration through sparse point cloud ICP alignment. The global attitude map constraining all LiDAR poses is incrementally optimized, resulting in global correction trajectories and real-time LiDAR attitude correction. They are sent back to the LiDAR mapping module for map update and repositioning. In post-processing, the LiDAR scan frames are spliced with the best estimated LiDAR attitude to obtain dense point cloud map results, visual front-end, stereo matching for stereo vision. This paper uses Kanade Lucas Tomasi (KLT) feature tracker to track all feature points in previous stereo matching, both in the left and right images. The output is only produced when they are all tracked. Larger stereo baselines aid in scale estimation and reduce the problem of degradation caused by features at long distances. We use a feature-based approach that is better suited for processing long baselines than KLT. If the number of stereo matches tracked falls below the threshold, feature extraction is performed using the Shi-Tomashi corner detector, followed by a feature elimination process that removes features with pixel distances from any existing features that are less than the threshold. All surviving features are computed after the ORB describes the sub, and then brute-force stereo matching is performed to obtain a new matching result. The system initializes the system by stereo matching the first frame of stereo vision. 

 ![avatar]( 20210113175643931.png) 

 Visual Inertial Navigation Odometer, the goal of stereo VIO is to provide real-time accurate state estimates at relatively high frequencies as a motion model for LiDAR mapping algorithms. A tightly coupled fixed-lag smoother running on a pose graph is a good trade-off between accuracy and efficiency. Optimization-based methods often allow for multiple linearizations to approach the global minimum. The fixed-lag pose graph optimizer further limits the maximum number of variables, so the computational cost is bounded. Since poor visual measurements can lead to convergence problems, a strict outlier rejection mechanism is enforced for visual measurements. The system eliminates outliers by checking for mean reprojection errors. LIDAR Mapping, LIDAR Mapping uses the high-frequency IMU rate VIO pose as motion before performing LIDAR point extraction and scanning frame point clouds to map registration. Representing the scan c as a point cloud obtained from a complete LIDAR rotation. Extracting geometric features from c, including points on sharp edges and points on the plane. This is then solved as an optimization problem by minimizing the Euclidean distance residuals formed by feature points based on the current scanning to the map (all previous feature points). 

 ![avatar]( 20210113175724813.png) 

 Based on radar-enhanced loop detection, loop detection is essential for any SLAM system because of the drift introduced by long-term operation. The purpose of loop closure is to eliminate drift by optimizing the global pose map that combines loop constraints and relative transformation information for LiDAR mapping. To better assist lidar mapping, the corrected lidar attitude is sent back in real time so that the newly scanned feature points are registered to the revisited map. This paper proposes to add ICP alignment on the basis of the visual bag of words loop detection and PnP loop constraint formulas. The system uses the incremental solver iSAM2 to optimize the global attitude map to achieve real-time, experimental results, VIL-SLAM is evaluated, and it is compared with the best real-time lidar-based system LOAM2 on a custom dataset. The stereoscopic VIO sub-module (VIL-VIO) is also evaluated using the EuRoC MAV dataset. The results for five typical environments are provided here, including characterless corridors, disorganized elevated platforms, tunnels, and outdoor environments. Data collection for all these sequences begins and ends at the same point. The odometry (LiDAR mapping attitude) is evaluated based on the final drift error (FDE). The mapping results are evaluated using the mean registration error (MRE) with the Faro scan as the basic true value. The map is first aligned with the model (Faro scan) and then the Euclidean distance between the map point and the nearest point in the model is calculated. The odometer FDE and mapping results are shown in Table 1, preferably shown in bold. Map comparison: Map registration errors of VIL-SLAM (right) and LOAM (left) compared to the model. Errors above 0.3m (a-b) are shown in red, and errors above 0.5m (c) are shown in red. Discontinuous red areas inside the blue and green are missing models due to occlusion by scanning equipment. 

 Summary VIL-SLAM is an advanced odometry and mapping system designed to operate stably over long periods of time in different environments. The current framework loosely couples VIL-VIO and LiDAR mapping together. We are extending it into a tightly coupled framework so that the precise attitude estimates derived from LiDAR mapping can be used for IMU bias correction. ICP refinement of sparse feature points between scan frames in loop closure for better loop constraints. 

